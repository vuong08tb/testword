!function(){var e={796:function(e,t,o){e.exports=o(643)},264:function(e){"use strict";var t=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:t,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:t&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:t&&!!window.screen,isInWorker:!t};e.exports=o},518:function(e){var t,o,r,n,a,i,s,c,l,p,u,d,h,m,v,g=!1;function f(){if(!g){g=!0;var e=navigator.userAgent,f=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),w=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(d=/\b(iPhone|iP[ao]d)/.exec(e),h=/\b(iP[ao]d)/.exec(e),p=/Android/i.exec(e),m=/FBAN\/\w+;/i.exec(e),v=/Mobile/i.exec(e),u=!!/Win64/.exec(e),f){(t=f[1]?parseFloat(f[1]):f[5]?parseFloat(f[5]):NaN)&&document&&document.documentMode&&(t=document.documentMode);var y=/(?:Trident\/(\d+.\d+))/.exec(e);i=y?parseFloat(y[1])+4:t,o=f[2]?parseFloat(f[2]):NaN,r=f[3]?parseFloat(f[3]):NaN,(n=f[4]?parseFloat(f[4]):NaN)?(f=/(?:Chrome\/(\d+\.\d+))/.exec(e),a=f&&f[1]?parseFloat(f[1]):NaN):a=NaN}else t=o=r=a=n=NaN;if(w){if(w[1]){var S=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);s=!S||parseFloat(S[1].replace("_","."))}else s=!1;c=!!w[2],l=!!w[3]}else s=c=l=!1}}var w={ie:function(){return f()||t},ieCompatibilityMode:function(){return f()||i>t},ie64:function(){return w.ie()&&u},firefox:function(){return f()||o},opera:function(){return f()||r},webkit:function(){return f()||n},safari:function(){return w.webkit()},chrome:function(){return f()||a},windows:function(){return f()||c},osx:function(){return f()||s},linux:function(){return f()||l},iphone:function(){return f()||d},mobile:function(){return f()||d||h||p||v},nativeApp:function(){return f()||m},android:function(){return f()||p},ipad:function(){return f()||h}};e.exports=w},534:function(e,t,o){"use strict";var r,n=o(264);n.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),e.exports=function(e,t){if(!n.canUseDOM||t&&!("addEventListener"in document))return!1;var o="on"+e,a=o in document;if(!a){var i=document.createElement("div");i.setAttribute(o,"return;"),a="function"==typeof i[o]}return!a&&r&&"wheel"===e&&(a=document.implementation.hasFeature("Events.wheel","3.0")),a}},643:function(e,t,o){"use strict";var r=o(518),n=o(534);function a(e){var t=0,o=0,r=0,n=0;return"detail"in e&&(o=e.detail),"wheelDelta"in e&&(o=-e.wheelDelta/120),"wheelDeltaY"in e&&(o=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=o,o=0),r=10*t,n=10*o,"deltaY"in e&&(n=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||n)&&e.deltaMode&&(1==e.deltaMode?(r*=40,n*=40):(r*=800,n*=800)),r&&!t&&(t=r<1?-1:1),n&&!o&&(o=n<1?-1:1),{spinX:t,spinY:o,pixelX:r,pixelY:n}}a.getEventType=function(){return r.firefox()?"DOMMouseScroll":n("wheel")?"wheel":"mousewheel"},e.exports=a}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,o),a.exports}o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=window.React,t=o.n(e),r=window.wp.url;const n=window.jQuery;var a=window.wp.element,i=window.wp.apiFetch,s=o.n(i),c=window.wp.i18n,l=function(e,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},l(e,t)},p=function(){return p=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},p.apply(this,arguments)};Object.create,Object.create;var u=o(796),d=o.n(u);function h(e,t,o,r,n){void 0===n&&(n=0);var a=S(t.width,t.height,n),i=a.width,s=a.height;return{x:m(e.x,i,o.width,r),y:m(e.y,s,o.height,r)}}function m(e,t,o,r){var n=t*r/2-o/2;return C(e,-n,n)}function v(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function g(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}function f(e,t){return Math.min(e,Math.max(0,t))}function w(e,t){return t}function y(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function S(e,t,o){var r=o*Math.PI/180;return{width:Math.abs(Math.cos(r)*e)+Math.abs(Math.sin(r)*t),height:Math.abs(Math.sin(r)*e)+Math.abs(Math.cos(r)*t)}}function C(e,t,o){return Math.min(Math.max(e,t),o)}function b(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter((function(e){return"string"==typeof e&&e.length>0})).join(" ").trim()}var _=function(e){function o(){var r=null!==e&&e.apply(this,arguments)||this;return r.imageRef=t().createRef(),r.videoRef=t().createRef(),r.containerRef=null,r.styleRef=null,r.containerRect=null,r.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},r.dragStartPosition={x:0,y:0},r.dragStartCrop={x:0,y:0},r.gestureZoomStart=0,r.gestureRotationStart=0,r.isTouching=!1,r.lastPinchDistance=0,r.lastPinchRotation=0,r.rafDragTimeout=null,r.rafPinchTimeout=null,r.wheelTimer=null,r.currentDoc="undefined"!=typeof document?document:null,r.currentWindow="undefined"!=typeof window?window:null,r.resizeObserver=null,r.state={cropSize:null,hasWheelJustStarted:!1},r.initResizeObserver=function(){if(void 0!==window.ResizeObserver&&r.containerRef){var e=!0;r.resizeObserver=new window.ResizeObserver((function(t){e?e=!1:r.computeSizes()})),r.resizeObserver.observe(r.containerRef)}},r.preventZoomSafari=function(e){return e.preventDefault()},r.cleanEvents=function(){r.currentDoc&&(r.currentDoc.removeEventListener("mousemove",r.onMouseMove),r.currentDoc.removeEventListener("mouseup",r.onDragStopped),r.currentDoc.removeEventListener("touchmove",r.onTouchMove),r.currentDoc.removeEventListener("touchend",r.onDragStopped),r.currentDoc.removeEventListener("gesturemove",r.onGestureMove),r.currentDoc.removeEventListener("gestureend",r.onGestureEnd))},r.clearScrollEvent=function(){r.containerRef&&r.containerRef.removeEventListener("wheel",r.onWheel),r.wheelTimer&&clearTimeout(r.wheelTimer)},r.onMediaLoad=function(){var e=r.computeSizes();e&&(r.emitCropData(),r.setInitialCrop(e)),r.props.onMediaLoaded&&r.props.onMediaLoaded(r.mediaSize)},r.setInitialCrop=function(e){if(r.props.initialCroppedAreaPercentages){var t=function(e,t,o,r,n,a){var i=S(t.width,t.height,o),s=C(r.width/i.width*(100/e.width),n,a);return{crop:{x:s*i.width/2-r.width/2-i.width*s*(e.x/100),y:s*i.height/2-r.height/2-i.height*s*(e.y/100)},zoom:s}}(r.props.initialCroppedAreaPercentages,r.mediaSize,r.props.rotation,e,r.props.minZoom,r.props.maxZoom),o=t.crop,n=t.zoom;r.props.onCropChange(o),r.props.onZoomChange&&r.props.onZoomChange(n)}else if(r.props.initialCroppedAreaPixels){var a=function(e,t,o,r,n,a){void 0===o&&(o=0);var i=S(t.naturalWidth,t.naturalHeight,o),s=C(function(e,t,o){var r=function(e){return e.width>e.height?e.width/e.naturalWidth:e.height/e.naturalHeight}(t);return o.height>o.width?o.height/(e.height*r):o.width/(e.width*r)}(e,t,r),n,a),c=r.height>r.width?r.height/e.height:r.width/e.width;return{crop:{x:((i.width-e.width)/2-e.x)*c,y:((i.height-e.height)/2-e.y)*c},zoom:s}}(r.props.initialCroppedAreaPixels,r.mediaSize,r.props.rotation,e,r.props.minZoom,r.props.maxZoom);o=a.crop,n=a.zoom,r.props.onCropChange(o),r.props.onZoomChange&&r.props.onZoomChange(n)}},r.computeSizes=function(){var e,t,o,n,a,i,s=r.imageRef.current||r.videoRef.current;if(s&&r.containerRef){r.containerRect=r.containerRef.getBoundingClientRect();var c=r.containerRect.width/r.containerRect.height,l=(null===(e=r.imageRef.current)||void 0===e?void 0:e.naturalWidth)||(null===(t=r.videoRef.current)||void 0===t?void 0:t.videoWidth)||0,u=(null===(o=r.imageRef.current)||void 0===o?void 0:o.naturalHeight)||(null===(n=r.videoRef.current)||void 0===n?void 0:n.videoHeight)||0,d=l/u,h=void 0;if(s.offsetWidth<l||s.offsetHeight<u)switch(r.props.objectFit){default:case"contain":h=c>d?{width:r.containerRect.height*d,height:r.containerRect.height}:{width:r.containerRect.width,height:r.containerRect.width/d};break;case"horizontal-cover":h={width:r.containerRect.width,height:r.containerRect.width/d};break;case"vertical-cover":h={width:r.containerRect.height*d,height:r.containerRect.height};break;case"auto-cover":h=l>u?{width:r.containerRect.width,height:r.containerRect.width/d}:{width:r.containerRect.height*d,height:r.containerRect.height}}else h={width:s.offsetWidth,height:s.offsetHeight};r.mediaSize=p(p({},h),{naturalWidth:l,naturalHeight:u}),r.props.setMediaSize&&r.props.setMediaSize(r.mediaSize);var m=r.props.cropSize?r.props.cropSize:function(e,t,o,r,n,a){void 0===a&&(a=0);var i=S(e,t,a),s=i.width,c=i.height,l=Math.min(s,o),p=Math.min(c,r);return l>p*n?{width:p*n,height:p}:{width:l,height:l/n}}(r.mediaSize.width,r.mediaSize.height,r.containerRect.width,r.containerRect.height,r.props.aspect,r.props.rotation);return(null===(a=r.state.cropSize)||void 0===a?void 0:a.height)===m.height&&(null===(i=r.state.cropSize)||void 0===i?void 0:i.width)===m.width||r.props.onCropSizeChange&&r.props.onCropSizeChange(m),r.setState({cropSize:m},r.recomputeCropPosition),r.props.setCropSize&&r.props.setCropSize(m),m}},r.onMouseDown=function(e){r.currentDoc&&(e.preventDefault(),r.currentDoc.addEventListener("mousemove",r.onMouseMove),r.currentDoc.addEventListener("mouseup",r.onDragStopped),r.onDragStart(o.getMousePoint(e)))},r.onMouseMove=function(e){return r.onDrag(o.getMousePoint(e))},r.onTouchStart=function(e){r.currentDoc&&(r.isTouching=!0,r.props.onTouchRequest&&!r.props.onTouchRequest(e)||(r.currentDoc.addEventListener("touchmove",r.onTouchMove,{passive:!1}),r.currentDoc.addEventListener("touchend",r.onDragStopped),2===e.touches.length?r.onPinchStart(e):1===e.touches.length&&r.onDragStart(o.getTouchPoint(e.touches[0]))))},r.onTouchMove=function(e){e.preventDefault(),2===e.touches.length?r.onPinchMove(e):1===e.touches.length&&r.onDrag(o.getTouchPoint(e.touches[0]))},r.onGestureStart=function(e){r.currentDoc&&(e.preventDefault(),r.currentDoc.addEventListener("gesturechange",r.onGestureMove),r.currentDoc.addEventListener("gestureend",r.onGestureEnd),r.gestureZoomStart=r.props.zoom,r.gestureRotationStart=r.props.rotation)},r.onGestureMove=function(e){if(e.preventDefault(),!r.isTouching){var t=o.getMousePoint(e),n=r.gestureZoomStart-1+e.scale;if(r.setNewZoom(n,t,{shouldUpdatePosition:!0}),r.props.onRotationChange){var a=r.gestureRotationStart+e.rotation;r.props.onRotationChange(a)}}},r.onGestureEnd=function(e){r.cleanEvents()},r.onDragStart=function(e){var t,o,n=e.x,a=e.y;r.dragStartPosition={x:n,y:a},r.dragStartCrop=p({},r.props.crop),null===(o=(t=r.props).onInteractionStart)||void 0===o||o.call(t)},r.onDrag=function(e){var t=e.x,o=e.y;r.currentWindow&&(r.rafDragTimeout&&r.currentWindow.cancelAnimationFrame(r.rafDragTimeout),r.rafDragTimeout=r.currentWindow.requestAnimationFrame((function(){if(r.state.cropSize&&void 0!==t&&void 0!==o){var e=t-r.dragStartPosition.x,n=o-r.dragStartPosition.y,a={x:r.dragStartCrop.x+e,y:r.dragStartCrop.y+n},i=r.props.restrictPosition?h(a,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):a;r.props.onCropChange(i)}})))},r.onDragStopped=function(){var e,t;r.isTouching=!1,r.cleanEvents(),r.emitCropData(),null===(t=(e=r.props).onInteractionEnd)||void 0===t||t.call(e)},r.onWheel=function(e){if(r.currentWindow&&(!r.props.onWheelRequest||r.props.onWheelRequest(e))){e.preventDefault();var t=o.getMousePoint(e),n=d()(e).pixelY,a=r.props.zoom-n*r.props.zoomSpeed/200;r.setNewZoom(a,t,{shouldUpdatePosition:!0}),r.state.hasWheelJustStarted||r.setState({hasWheelJustStarted:!0},(function(){var e,t;return null===(t=(e=r.props).onInteractionStart)||void 0===t?void 0:t.call(e)})),r.wheelTimer&&clearTimeout(r.wheelTimer),r.wheelTimer=r.currentWindow.setTimeout((function(){return r.setState({hasWheelJustStarted:!1},(function(){var e,t;return null===(t=(e=r.props).onInteractionEnd)||void 0===t?void 0:t.call(e)}))}),250)}},r.getPointOnContainer=function(e){var t=e.x,o=e.y;if(!r.containerRect)throw new Error("The Cropper is not mounted");return{x:r.containerRect.width/2-(t-r.containerRect.left),y:r.containerRect.height/2-(o-r.containerRect.top)}},r.getPointOnMedia=function(e){var t=e.x,o=e.y,n=r.props,a=n.crop,i=n.zoom;return{x:(t+a.x)/i,y:(o+a.y)/i}},r.setNewZoom=function(e,t,o){var n=(void 0===o?{}:o).shouldUpdatePosition,a=void 0===n||n;if(r.state.cropSize&&r.props.onZoomChange){var i=C(e,r.props.minZoom,r.props.maxZoom);if(a){var s=r.getPointOnContainer(t),c=r.getPointOnMedia(s),l={x:c.x*i-s.x,y:c.y*i-s.y},p=r.props.restrictPosition?h(l,r.mediaSize,r.state.cropSize,i,r.props.rotation):l;r.props.onCropChange(p)}r.props.onZoomChange(i)}},r.getCropData=function(){return r.state.cropSize?function(e,t,o,r,n,a,i){void 0===a&&(a=0),void 0===i&&(i=!0);var s=i?f:w,c=S(t.width,t.height,a),l=S(t.naturalWidth,t.naturalHeight,a),u={x:s(100,((c.width-o.width/n)/2-e.x/n)/c.width*100),y:s(100,((c.height-o.height/n)/2-e.y/n)/c.height*100),width:s(100,o.width/c.width*100/n),height:s(100,o.height/c.height*100/n)},d=Math.round(s(l.width,u.width*l.width/100)),h=Math.round(s(l.height,u.height*l.height/100)),m=l.width>=l.height*r?{width:Math.round(h*r),height:h}:{width:d,height:Math.round(d/r)};return{croppedAreaPercentages:u,croppedAreaPixels:p(p({},m),{x:Math.round(s(l.width-m.width,u.x*l.width/100)),y:Math.round(s(l.height-m.height,u.y*l.height/100))})}}(r.props.restrictPosition?h(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop,r.mediaSize,r.state.cropSize,r.getAspect(),r.props.zoom,r.props.rotation,r.props.restrictPosition):null},r.emitCropData=function(){var e=r.getCropData();if(e){var t=e.croppedAreaPercentages,o=e.croppedAreaPixels;r.props.onCropComplete&&r.props.onCropComplete(t,o),r.props.onCropAreaChange&&r.props.onCropAreaChange(t,o)}},r.emitCropAreaChange=function(){var e=r.getCropData();if(e){var t=e.croppedAreaPercentages,o=e.croppedAreaPixels;r.props.onCropAreaChange&&r.props.onCropAreaChange(t,o)}},r.recomputeCropPosition=function(){if(r.state.cropSize){var e=r.props.restrictPosition?h(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop;r.props.onCropChange(e),r.emitCropData()}},r}return function(e,t){function __(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}(o,e),o.prototype.componentDidMount=function(){this.currentDoc&&this.currentWindow&&(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),void 0===window.ResizeObserver&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=".reactEasyCrop_Container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  user-select: none;\n  touch-action: none;\n  cursor: move;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.reactEasyCrop_Image,\n.reactEasyCrop_Video {\n  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */\n}\n\n.reactEasyCrop_Contain {\n  max-width: 100%;\n  max-height: 100%;\n  margin: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.reactEasyCrop_Cover_Horizontal {\n  width: 100%;\n  height: auto;\n}\n.reactEasyCrop_Cover_Vertical {\n  width: auto;\n  height: 100%;\n}\n\n.reactEasyCrop_CropArea {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  box-sizing: border-box;\n  box-shadow: 0 0 0 9999em;\n  color: rgba(0, 0, 0, 0.5);\n  overflow: hidden;\n}\n\n.reactEasyCrop_CropAreaRound {\n  border-radius: 50%;\n}\n\n.reactEasyCrop_CropAreaGrid::before {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 0;\n  bottom: 0;\n  left: 33.33%;\n  right: 33.33%;\n  border-top: 0;\n  border-bottom: 0;\n}\n\n.reactEasyCrop_CropAreaGrid::after {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 33.33%;\n  bottom: 33.33%;\n  left: 0;\n  right: 0;\n  border-left: 0;\n  border-right: 0;\n}\n",this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},o.prototype.componentWillUnmount=function(){var e,t;this.currentDoc&&this.currentWindow&&(void 0===window.ResizeObserver&&this.currentWindow.removeEventListener("resize",this.computeSizes),null===(e=this.resizeObserver)||void 0===e||e.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&(null===(t=this.styleRef.parentNode)||void 0===t||t.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},o.prototype.componentDidUpdate=function(e){var t,o,r,n,a,i,s,c,l;e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():(null===(t=e.cropSize)||void 0===t?void 0:t.height)!==(null===(o=this.props.cropSize)||void 0===o?void 0:o.height)||(null===(r=e.cropSize)||void 0===r?void 0:r.width)!==(null===(n=this.props.cropSize)||void 0===n?void 0:n.width)?this.computeSizes():(null===(a=e.crop)||void 0===a?void 0:a.x)===(null===(i=this.props.crop)||void 0===i?void 0:i.x)&&(null===(s=e.crop)||void 0===s?void 0:s.y)===(null===(c=this.props.crop)||void 0===c?void 0:c.y)||this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),e.video!==this.props.video&&(null===(l=this.videoRef.current)||void 0===l||l.load())},o.prototype.getAspect=function(){var e=this.props,t=e.cropSize,o=e.aspect;return t?t.width/t.height:o},o.prototype.onPinchStart=function(e){var t=o.getTouchPoint(e.touches[0]),r=o.getTouchPoint(e.touches[1]);this.lastPinchDistance=v(t,r),this.lastPinchRotation=g(t,r),this.onDragStart(y(t,r))},o.prototype.onPinchMove=function(e){var t=this;if(this.currentDoc&&this.currentWindow){var r=o.getTouchPoint(e.touches[0]),n=o.getTouchPoint(e.touches[1]),a=y(r,n);this.onDrag(a),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame((function(){var e=v(r,n),o=t.props.zoom*(e/t.lastPinchDistance);t.setNewZoom(o,a,{shouldUpdatePosition:!1}),t.lastPinchDistance=e;var i=g(r,n),s=t.props.rotation+(i-t.lastPinchRotation);t.props.onRotationChange&&t.props.onRotationChange(s),t.lastPinchRotation=i}))}},o.prototype.render=function(){var e=this,o=this.props,r=o.image,n=o.video,a=o.mediaProps,i=o.transform,s=o.crop,c=s.x,l=s.y,u=o.rotation,d=o.zoom,h=o.cropShape,m=o.showGrid,v=o.style,g=v.containerStyle,f=v.cropAreaStyle,w=v.mediaStyle,y=o.classes,S=y.containerClassName,C=y.cropAreaClassName,_=y.mediaClassName,E=o.objectFit;return t().createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(t){return e.containerRef=t},"data-testid":"container",style:g,className:b("reactEasyCrop_Container",S)},r?t().createElement("img",p({alt:"",className:b("reactEasyCrop_Image","contain"===E&&"reactEasyCrop_Contain","horizontal-cover"===E&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===E&&"reactEasyCrop_Cover_Vertical","auto-cover"===E&&(this.mediaSize.naturalWidth>this.mediaSize.naturalHeight?"reactEasyCrop_Cover_Horizontal":"reactEasyCrop_Cover_Vertical"),_)},a,{src:r,ref:this.imageRef,style:p(p({},w),{transform:i||"translate(".concat(c,"px, ").concat(l,"px) rotate(").concat(u,"deg) scale(").concat(d,")")}),onLoad:this.onMediaLoad})):n&&t().createElement("video",p({autoPlay:!0,loop:!0,muted:!0,className:b("reactEasyCrop_Video","contain"===E&&"reactEasyCrop_Contain","horizontal-cover"===E&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===E&&"reactEasyCrop_Cover_Vertical","auto-cover"===E&&(this.mediaSize.naturalWidth>this.mediaSize.naturalHeight?"reactEasyCrop_Cover_Horizontal":"reactEasyCrop_Cover_Vertical"),_)},a,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:p(p({},w),{transform:i||"translate(".concat(c,"px, ").concat(l,"px) rotate(").concat(u,"deg) scale(").concat(d,")")}),controls:!1}),(Array.isArray(n)?n:[{src:n}]).map((function(e){return t().createElement("source",p({key:e.src},e))}))),this.state.cropSize&&t().createElement("div",{style:p(p({},f),{width:this.state.cropSize.width,height:this.state.cropSize.height}),"data-testid":"cropper",className:b("reactEasyCrop_CropArea","round"===h&&"reactEasyCrop_CropAreaRound",m&&"reactEasyCrop_CropAreaGrid",C)}))},o.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:3,minZoom:1,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0},o.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},o.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},o}(t().Component);function E(e){return e*Math.PI/180}const x=document.querySelector(".lp-content-area");let z,M={};const R=e=>{z.style.opacity=.4,wp.apiFetch({path:(0,r.addQueryArgs)("lp/v1/courses/archive-course",e),method:"GET"}).then((e=>{if(void 0!==e.data.content&&(z.innerHTML=e.data.content),x){const t=document.querySelector(".learn-press-pagination");t&&t.remove(),void 0!==e.data.pagination&&x.insertAdjacentHTML("beforeend",e.data.pagination)}})).catch((e=>{console.log(e)})).finally((()=>{if(e.paged){const e={behavior:"smooth"};z.scrollIntoView(e)}z.style.opacity=1}))};document.addEventListener("DOMContentLoaded",(function(e){(()=>{const e=document.querySelectorAll(".learn-press-course-tab__filter__content"),t=(e,t,n=!1,a=!1)=>{wp.apiFetch({path:(0,r.addQueryArgs)("lp/v1/profile/course-tab",t),method:"GET"}).then((r=>{const i=e.querySelector(".lp-skeleton-animation");if(i&&i.remove(),"success"===r.status&&r.data?n?e.innerHTML+=r.data:e.innerHTML=r.data:n?e.innerHTML+=`<div class="lp-ajax-message" style="display:block">${r.message&&r.message}</div>`:e.innerHTML=`<div class="lp-ajax-message" style="display:block">${r.message&&r.message}</div>`,a){a.classList.remove("loading");const e=parseInt(a.dataset.paged);parseInt(a.dataset.number)<=e&&a.remove(),a.dataset.paged=e+1}o(e,t)})).catch((t=>{n?e.innerHTML+=`<div class="lp-ajax-message error" style="display:block">${t.message&&t.message}</div>`:e.innerHTML=`<div class="lp-ajax-message error" style="display:block">${t.message&&t.message}</div>`}))};if("IntersectionObserver"in window){const o=new IntersectionObserver(((e,r)=>{e.forEach((e=>{if(e.isIntersecting){const r=e.target,n=r.parentNode.querySelector(".lp_profile_tab_input_param"),a={...JSON.parse(n.value),status:r.dataset.tab||""};t(r,a),o.unobserve(r)}}))}));[...e].map((e=>{if("all"!==e.dataset.tab)o.observe(e);else{const o=e.parentNode.querySelector(".lp_profile_tab_input_param"),r={...JSON.parse(o.value),status:"all"===e.dataset.tab?"":e.dataset.tab||""};t(e,r)}}))}document.querySelectorAll(".learn-press-course-tab-filters").forEach((e=>{const t=e.querySelectorAll(".learn-press-filters a");t.forEach((o=>{o.addEventListener("click",(r=>{r.preventDefault();const n=o.dataset.tab;[...t].map((e=>{e.classList.remove("active")})),o.classList.add("active"),[...e.querySelectorAll(".learn-press-course-tab__filter__content")].map((e=>{e.style.display="none",e.dataset.tab===n&&(e.style.display="")}))}))}))}));const o=(e,o)=>{const r=e.querySelector("button[data-paged]");r&&r.addEventListener("click",(n=>{n.preventDefault();const a=r&&r.dataset.paged;r.classList.add("loading");const i="list"===o.layout?".lp_profile_course_progress":".learn-press-courses";t(e.querySelector(i),{...o,paged:a},!0,r)}))}})(),(()=>{const e=document.querySelector(".learn-press-profile-course__statistic");if(!e)return;const t=document.querySelector(".lp-profile-nav-tabs li.active");if(!t)return;let o="lp/v1/profile/student/statistic";t.classList.contains("courses")&&(o="lp/v1/profile/instructor/statistic");const n=document.querySelector('[name="args_query_user_courses_statistic"]');if(!n)return;const a=JSON.parse(n.value);var i,s;i=e,s=a,wp.apiFetch({path:(0,r.addQueryArgs)(o,s),method:"GET"}).then((e=>{"success"===e.status&&e.data?i.innerHTML=e.data:i.innerHTML=`<div class="lp-ajax-message error" style="display:block">${e.message&&e.message}</div>`})).catch((e=>{console.log(e)}))})(),function(){const e=n(".order-recover"),t=e.find(".button-recover-order");t.on("click",(()=>{e.find(".learn-press-message").remove(),n(".profile-recover-order").find(".learn-press-message").remove(),n.post({url:"",data:e.serializeJSON(),beforeSend(){t.addClass("loading").attr("disabled","disabled")},success(o){if((o=LP.parseJSON(o)).message){const t=n('<div class="learn-press-message icon"><i class="fa"></i> '+o.message+"</div>");"error"==o.result&&t.addClass("error"),e.before(t)}o.redirect&&(window.location.href=o.redirect),t.removeClass("loading").removeAttr("disabled","")},error(){t.removeClass("loading").removeAttr("disabled","")}})}))}(),function(){if(z=document.querySelector(".learnpress-course-container"),!z)return;const e=JSON.parse(z.querySelector(".lp_profile_data").value);M={...e,c_author:e?.userID,template:"user_not_publish"},R(M),document.addEventListener("click",(function(e){const t=e.target,o=t.closest(".learn-press-pagination");if(!o)return;let r;if("a"===t.tagName.toLowerCase())r=t;else{if(!t.closest("a.page-numbers"))return;r=t.closest("a.page-numbers")}e.preventDefault();const n=parseInt(o.querySelector(".current").innerHTML);let a;a=r.classList.contains("next")?n+1:r.classList.contains("prev")?n-1:r.innerHTML,M={...M,paged:a},R(M)}))}()})),document.getElementById("learnpress-avatar-upload")&&wp.element.render((0,e.createElement)((function(){const[t,o]=(0,a.useState)(),[r,n]=(0,a.useState)(0),[i,l]=(0,a.useState)(0),[p,u]=(0,a.useState)({x:0,y:0}),[d,h]=(0,a.useState)(0),[m,v]=(0,a.useState)(null),[g,f]=(0,a.useState)(0),[w,y]=(0,a.useState)(0),[S,C]=(0,a.useState)(!1),[b,x]=(0,a.useState)(!0),[z,M]=(0,a.useState)(""),[R,D]=(0,a.useState)({type:"",message:""}),P=(0,a.useRef)();(0,a.useEffect)((()=>{!async function(){x(!0);try{const e=await s()({method:"GET",path:"lp/v1/profile/get-avatar"});n(e?.data?.width?parseInt(e.data.width):0),l(e?.data?.height?parseInt(e.data.height):0),o(e?.data?.url?e.data.url:"")}catch(e){D({type:"error",message:e.message})}x(!1)}()}),[]);const L=(0,a.useCallback)(((e,t)=>{v(t)}),[]),T=(0,a.useCallback)((async()=>{C({save:!0});try{const e=await async function(e,t,o=0,r={horizontal:!1,vertical:!1}){const n=await(s=e,new Promise(((e,t)=>{const o=new Image;o.addEventListener("load",(()=>e(o))),o.addEventListener("error",(e=>t(e))),o.setAttribute("crossOrigin","anonymous"),o.src=s}))),a=document.createElement("canvas"),i=a.getContext("2d");var s;if(!i)return null;const c=E(o),{width:l,height:p}=function(e,t,o){const r=E(o);return{width:Math.abs(Math.cos(r)*e)+Math.abs(Math.sin(r)*t),height:Math.abs(Math.sin(r)*e)+Math.abs(Math.cos(r)*t)}}(n.width,n.height,o);a.width=l,a.height=p,i.translate(l/2,p/2),i.rotate(c),i.scale(r.horizontal?-1:1,r.vertical?-1:1),i.translate(-n.width/2,-n.height/2),i.drawImage(n,0,0);const u=i.getImageData(t.x,t.y,t.width,t.height);return a.width=t.width,a.height=t.height,i.putImageData(u,0,0),a.toDataURL("image/jpeg")}(t,m,d),o=await((e,t,o)=>new Promise(((r,n)=>{const a=document.createElement("canvas"),i=document.createElement("img");i.src=e,i.setAttribute("crossOrigin","anonymous"),i.onload=()=>{(i.naturalWidth>t||i.naturalHeight>o)&&(a.width=t,a.height=o,a.getContext("2d").drawImage(i,0,0,t,o),r(a.toDataURL("image/jpeg"))),r(e)},i.onerror=e=>n(e)})))(e,r,i),n=await s()({path:"lp/v1/profile/upload-avatar",method:"POST",data:{file:o||""}}),{data:a,status:c,message:l}=await n;"success"===c&&window.location.reload(),D({type:c,message:l})}catch(e){D({type:"error",message:e.message||""})}C({save:!1})}),[m,d]);return(0,e.createElement)("div",{className:"learnpress_avatar"},b?(0,e.createElement)("ul",{className:"lp-skeleton-animation"},(0,e.createElement)("li",{style:{width:200,height:200}}),(0,e.createElement)("li",{style:{width:200,height:20}}),(0,e.createElement)("li",{style:{width:200,height:20}})):(0,e.createElement)(e.Fragment,null,t&&!z&&(0,e.createElement)(e.Fragment,null,w&&g?(0,e.createElement)("div",{className:"learnpress_avatar__cropper"},(0,e.createElement)("div",{style:{position:"relative",width:g,height:w,zIndex:9999,maxWidth:"100%",maxHeight:"800px"}},(0,e.createElement)(_,{image:t,crop:p,zoom:"1",cropSize:{width:r,height:i},onCropChange:u,onCropComplete:L})),(0,e.createElement)("div",null,(0,e.createElement)("button",{className:"learnpress_avatar__button learnpress_avatar__button--save "+(S?.save?"learnpress_avatar__button--loading":""),onClick:T},lpProfileSettings.text_save))):(0,e.createElement)("div",{className:"learnpress_avatar__cropper"},(0,e.createElement)("img",{src:t,alt:""}),(0,e.createElement)("div",null,(0,e.createElement)("button",{className:"learnpress_avatar__button learnpress_avatar__button--replace",onClick:()=>P.current&&P.current.click()},lpProfileSettings.text_replace),(0,e.createElement)("button",{className:"learnpress_avatar__button learnpress_avatar__button--remove "+(S?.remove?"learnpress_avatar__button--loading":""),onClick:async function(){if(confirm((0,c.__)("Are you sure you want to remove your avatar?","learnpress"))){C({remove:!0});try{const e=await s()({path:"lp/v1/profile/remove-avatar",method:"POST"}),{data:t,status:r,message:n}=await e;D({type:r,message:n}),o("")}catch(e){D({type:"error",message:e.message||""})}C({remove:!1})}}},lpProfileSettings.text_remove)))),(0,e.createElement)("form",{style:{display:t?"none":""}},(0,e.createElement)("div",{className:"learnpress_avatar__form"},(0,e.createElement)("div",{className:"learnpress_avatar__form-group"},(0,e.createElement)("label",{htmlFor:"avatar-file"},(0,e.createElement)("div",{className:"learnpress_avatar__form__upload"},(0,e.createElement)("div",null,(0,e.createElement)("span",null,(0,e.createElement)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"plus",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},(0,e.createElement)("defs",null,(0,e.createElement)("style",null)),(0,e.createElement)("path",{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}),(0,e.createElement)("path",{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}))),(0,e.createElement)("div",null,lpProfileSettings.text_upload))),(0,e.createElement)("input",{ref:P,type:"file",id:"avatar-file",accept:"image/*",onChange:e=>(async e=>{const t=await function(e){return new Promise((t=>{const o=new FileReader;o.addEventListener("load",(()=>t(o.result)),!1),o.readAsDataURL(e)}))}(e),n=new Image;n.src=await t,n.onload=await(function(){f(n.naturalWidth),y(n.naturalHeight);let a="";parseInt(e.size)>2097152?a=(0,c.__)("The file size is too large. You need to upload a file < 2MB.","learnpress"):(n.naturalWidth<r||n.naturalHeight<i)&&(a=(0,c.sprintf)((0,c.__)("The image size must be greater than or equal to %1$sx%2$spx","learnpress"),r,i)),a?M(a):(M(""),o(t))})})(e.target.files&&e.target.files.length>0?e.target.files[0]:"")}))))),z&&(0,e.createElement)("div",{className:"lp-ajax-message error",style:{display:"block"}},z),!z&&R&&R.type&&R.message&&(0,e.createElement)("div",{className:`lp-ajax-message ${R.type}`,style:{display:"block"}},R.message)))}),null),document.getElementById("learnpress-avatar-upload"))}()}();