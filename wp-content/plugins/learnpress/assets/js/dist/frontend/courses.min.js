!function(){"use strict";if(void 0===lpGlobalSettings)throw new Error("lpGlobalSettings is undefined");var e={apiCourses:lpGlobalSettings.lp_rest_url+"lp/v1/courses/archive-course"};const t=(e,t)=>{const r=new URL(e);return Object.keys(t).forEach((e=>{r.searchParams.set(e,t[e])})),r},r={get:(e,t,r)=>{let o;if(r)o=wpCookies.get(e);else{let t=wpCookies.get("LP");t&&(t=JSON.parse(t),o=e?t[e]:t)}return o||o===t||(o=t),o},set(e,t,r,o,n,s){if(arguments.length>2)wpCookies.set(e,t,r,o,n,s);else if(2==arguments.length){let r=wpCookies.get("LP");r=r?JSON.parse(r):{},r[e]=t,wpCookies.set("LP",JSON.stringify(r),"","/")}else wpCookies.set("LP",JSON.stringify(e),"","/")},remove(e){const t=r.get(),o=new RegExp(e,"g"),n={},s=e.match(/\*/);for(const r in t)s?r.match(o)||(n[r]=t[r]):e!=r&&(n[r]=t[r]);r.set(n)}};var o=r;"undefined"==typeof lpGlobalSettings&&console.log("lpGlobalSettings is undefined"),window.lpArchiveRequestCourse=e=>{window.lpCourseList.updateEventTypeBeforeFetch("filter"),window.lpCourseList.triggerFetchAPI(e)},document.addEventListener("change",(function(e){const t=e.target;window.lpCourseList.onChangeSortBy(e,t),window.lpCourseList.onChangeTypeLayout(e,t)})),document.addEventListener("click",(function(e){const t=e.target;window.lpCourseList.clickLoadMore(e,t),window.lpCourseList.clickNumberPage(e,t)})),document.addEventListener("scroll",(function(e){const t=e.target;window.lpCourseList.scrollInfinite(e,t)})),document.addEventListener("keyup",(function(e){const t=e.target;window.lpCourseList.searchCourse(e,t)})),document.addEventListener("submit",(function(e){const t=e.target;window.lpCourseList.searchCourse(e,t)})),window.lpCourseList=(()=>{const r="lp-archive-courses",n="learn-press-courses",s="lp-archive-course-skeleton",i=lpGlobalSettings.lpArchiveLoadAjax||0,a=lpGlobalSettings.lpArchiveNoLoadAjaxFirst||0,c=lpGlobalSettings.lpArchiveSkeleton||0,l=(()=>{let e=window.location.href;return e.includes("?")&&(e=e.split("?")[0]),e})();let u={};const d=lpGlobalSettings.lpArchivePaginationType||"number";let p,f,g=!1;const w=(r,o={})=>{const n=t(e.apiCourses,r);let s={};0!==lpGlobalSettings.user_id&&(s={headers:{"X-WP-Nonce":lpGlobalSettings.nonce}}),((e,t={},r={})=>{"function"==typeof r.before&&r.before(),fetch(e,{method:"GET",...t}).then((e=>e.json())).then((e=>{"function"==typeof r.success&&r.success(e)})).catch((e=>{"function"==typeof r.error&&r.error(e)})).finally((()=>{"function"==typeof r.completed&&r.completed()}))})(n,s,o)};return{init:()=>{const e={},t=window.location.search,r=new URLSearchParams(t);for(const[t,o]of r.entries())e[t]=o;u={...c,...e},u.paged=parseInt(u.paged||1),isNaN(u.paged)&&(u.paged=1),a&&"number"!==d&&(u.paged=1),window.localStorage.setItem("lp_filter_courses",JSON.stringify(u))},updateEventTypeBeforeFetch:e=>{p=e},onChangeSortBy:(e,r)=>{r.classList.contains("courses-order-by")&&(e.preventDefault(),u.order_by=r.value,window.location.href=t(l,u))},onChangeTypeLayout:(e,t)=>{if("lp-switch-layout-btn"!==t.getAttribute("name"))return;const s=t.closest(`.${r}`);if(!s)return;const i=s.querySelector(`.${n}`);if(!i)return;e.preventDefault();const a=t.value;a&&(i.dataset.layout=a,o.set("courses-layout",a))},clickNumberPage:(e,t)=>{if(!i||lpGlobalSettings.noLoadCoursesJs)return;if(t.classList.contains("page-numbers")){if(!t.closest(`.${r}`))return;e.preventDefault();const o=u.paged;return t.classList.contains("prev")?u.paged=o-1:t.classList.contains("next")?u.paged=o+1:u.paged=parseInt(t.textContent),p="number",void window.lpCourseList.triggerFetchAPI(u)}const o=t.closest(".page-numbers");o&&(e.preventDefault(),o.click())},clickLoadMore:(e,t)=>{if(!t.classList.contains("courses-btn-load-more"))return;const o=t.closest(`.${r}`);o&&o.querySelector(`.${n}`)&&(e.preventDefault(),++u.paged,p="load-more",window.lpCourseList.triggerFetchAPI(u))},scrollInfinite:(e,t)=>{const o=document.querySelector(`.${r}`);if(!o)return;const n=o.querySelector(".courses-load-infinite");n&&new IntersectionObserver((function(e){for(const t of e)if(t.isIntersecting){if(g)return;++u.paged,p="infinite",window.lpCourseList.triggerFetchAPI(u)}})).observe(n)},triggerFetchAPI:e=>{const t=document.querySelector(`.${r}`);if(!t)return;const o=t.querySelector(`.${n}`);if(!o)return;let s;switch(u=e,p){case"load-more":s=window.lpCourseList.callBackPaginationTypeLoadMore(t,o);break;case"infinite":s=window.lpCourseList.callBackPaginationTypeInfinite(t,o);break;case"custom":s=e.customCallBack||!1;break;default:s=window.lpCourseList.callBackFilter(e,t,o)}s&&w(e,s)},callBackFilter:(e,o,n)=>{if(!n)return;const i=n.querySelector(`.${s}`);return{before:()=>{window.history.pushState("","",t(l,e)),window.localStorage.setItem("lp_filter_courses",JSON.stringify(e)),i&&(i.style.display="block")},success:e=>{n.querySelectorAll(`:not(.${s})`).forEach((e=>{e.closest(`.${s}`)||e.remove()})),n.insertAdjacentHTML("afterbegin",e.data.content||"");const t=document.querySelector(".learn-press-pagination");t&&t.remove();const r=e.data.pagination||"";n.insertAdjacentHTML("afterend",r)},error:e=>{n.innerHTML+=`<div class="lp-ajax-message error" style="display:block">${e.message||"Error"}</div>`},completed:()=>{i&&(i.style.display="none"),n.closest(`.${r}`).scrollIntoView({behavior:"smooth"})}}},callBackPaginationTypeLoadMore:(e,t)=>{if(!t||!e)return!1;const r=e.querySelector(".courses-btn-load-more");let o;return r&&(o=r.querySelector(".lp-loading-circle")),{before:()=>{r&&(o.classList.remove("hide"),r.setAttribute("disabled","disabled"))},success:e=>{t.insertAdjacentHTML("beforeend",e.data.content||""),t.insertAdjacentHTML("afterend",e.data.pagination||"")},error:e=>{t.innerHTML+=`<div class="lp-ajax-message error" style="display:block">${e.message||"Error"}</div>`},completed:()=>{r&&(o.classList.add("hide"),r.remove())}}},callBackPaginationTypeInfinite:(e,t)=>{if(!t||!t)return;const r=e.querySelector(".courses-load-infinite");if(!r)return;const o=r.querySelector(".lp-loading-circle");return g=!0,r.classList.remove("courses-load-infinite"),{before:()=>{o.classList.remove("hide")},success:e=>{t.insertAdjacentHTML("beforeend",e.data.content||""),e.data.pagination&&t.insertAdjacentHTML("afterend",e.data.pagination||"")},error:e=>{t.innerHTML+=`<div class="lp-ajax-message error" style="display:block">${e.message||"Error"}</div>`},completed:()=>{r.remove(),g=!1}}},searchCourse:(e,t)=>{if("c_search"===t.name){e.preventDefault();const r=t.closest("form.search-courses");if(!r)return;return void r.querySelector('button[type="submit"]').click()}if(!t.classList.contains("search-courses"))return;const o=t;e.preventDefault();const s=o.closest(`.${r}`);if(!s)return;if(!s.querySelector(`.${n}`))return;const i=o.querySelector("input[name=c_search]").value;(!i||i&&i.length>2)&&(void 0!==f&&clearTimeout(f),f=setTimeout((function(){p="filter",u.c_search=i,u.paged=1,window.lpCourseList.triggerFetchAPI(u)}),800))},ajaxEnableLoadPage:()=>{let e=0;if(!a){let t;const o={success:o=>{t=setInterval((function(){const i=document.querySelector(`.${s}`),a=document.querySelector(`.${r}`);let c;if(a&&(c=a.querySelector(`.${n}`)),++e,e>5e3&&clearInterval(t),c&&i){clearInterval(t),c.insertAdjacentHTML("afterbegin",o.data.content||""),i.style.display="none";const e=o.data.pagination||"";c.insertAdjacentHTML("afterend",e)}}),1)}};"number"!==d&&(u.paged=1),w(u,o)}},getFilterParams:()=>u}})(),window.lpCourseList.init(),window.lpCourseList.ajaxEnableLoadPage()}();