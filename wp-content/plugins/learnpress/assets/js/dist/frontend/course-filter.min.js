!function(){"use strict";if(void 0===lpGlobalSettings)throw new Error("lpGlobalSettings is undefined");var e=lpGlobalSettings.lp_rest_url+"lp/v1/courses/archive-course";const t="lp-form-course-filter";let s,r,l;document.addEventListener("submit",(function(e){const s=e.target;s.classList.contains(t)&&(e.preventDefault(),window.lpCourseFilter.submit(s))})),document.addEventListener("click",(function(e){const t=e.target;t.classList.contains("course-filter-reset")&&(e.preventDefault(),window.lpCourseFilter.reset(t)),window.lpCourseFilter.showHideSearchResult(t),window.lpCourseFilter.triggerInputChoice(t)})),document.addEventListener("keyup",(function(e){e.preventDefault();const t=e.target;t.classList.contains("lp-course-filter-search")&&window.lpCourseFilter.searchSuggestion(t)})),window.lpCourseFilter={searchSuggestion:e=>{if(1!==parseInt(e.dataset.searchSuggest||1))return;const r=e.value.trim(),l=e.closest(`.${t}`),o=l.querySelector(".lp-loading-circle");void 0!==s&&clearTimeout(s),r&&r.length>2?(o.classList.remove("hide"),s=setTimeout((function(){window.lpCourseFilter.callAPICourseSuggest(r,(e=>{document.querySelector(".lp-course-filter-search-result").innerHTML=e.data.content,o.classList.add("hide")}))}),500)):(l.querySelector(".lp-course-filter-search-result").innerHTML="",o.classList.add("hide"))},callAPICourseSuggest:(t,s,o)=>{void 0!==r&&r.abort(),r=new AbortController,l=r.signal;const c=e+"?c_search="+t+"&c_suggest=1";let i={method:"GET"};0!==lpGlobalSettings.user_id&&(i={...i,headers:{"X-WP-Nonce":lpGlobalSettings.nonce}}),fetch(c,{...i,signal:l}).then((e=>e.json())).then((e=>{void 0!==s&&s(e)})).catch((e=>{console.log(e)})).finally((()=>{void 0!==o&&o()}))},submit:e=>{const t=new FormData(e),s=document.querySelector(".learn-press-courses"),r=document.querySelector(".lp-archive-course-skeleton"),l={paged:1};window.lpCourseList.updateEventTypeBeforeFetch("filter");for(const e of t.entries()){const s=e[0],r=t.getAll(s);l.hasOwnProperty(s)||(l[s]=r)}if(lpGlobalSettings.is_course_archive&&lpGlobalSettings.lpArchiveLoadAjax&&s&&r)window.lpCourseList.triggerFetchAPI(l);else{const e=lpGlobalSettings.courses_url||"",t=new URL(e);Object.keys(l).forEach((e=>{t.searchParams.set(e,l[e])})),document.location.href=t.href}},reset:e=>{const s=e.closest(`.${t}`),r=s.querySelector(".course-filter-submit"),l=s.querySelector(".lp-course-filter-search-result"),o=s.querySelector(".lp-course-filter-search");s.reset(),l&&(l.innerHTML=""),o&&(o.value="");for(let e=0;e<s.elements.length;e++)s.elements[e].removeAttribute("checked");lpGlobalSettings.is_course_archive&&r.click()},showHideSearchResult:e=>{const t=document.querySelector(".lp-course-filter-search-result");t&&(e.closest(".lp-course-filter-search-result")||e.classList.contains("lp-course-filter-search-result")||e.classList.contains("lp-course-filter-search")?t.style.display="block":t.style.display="none")},triggerInputChoice:e=>{if("INPUT"===e.tagName)return;let t;e.classList.contains("lp-course-filter__field")&&(t=e);const s=e.closest(".lp-course-filter__field");s&&(t=s),t&&t.querySelector("input").click()}}}();